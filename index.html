<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DOJ Token Dashboard</title>
  <link rel="icon" href="https://raw.githubusercontent.com/TOKEN-TRUSTED/DOJ-TOKEN-ORIGINAL/main/logo.png" type="image/png">
  <style>
    body {
      font-family: sans-serif;
      background-color: #0e1117;
      color: #ffffff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
    }
    .container {
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 12px;
      padding: 2rem;
      text-align: center;
      max-width: 500px;
      width: 90%;
    }
    .token-logo {
      width: 72px;
      height: 72px;
      border-radius: 50%;
      margin-bottom: 1rem;
    }
    button {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      background-color: #238636;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }
    .price, .balance {
      margin: 1rem 0;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="https://raw.githubusercontent.com/TOKEN-TRUSTED/DOJ-TOKEN-ORIGINAL/main/logo.png" alt="DOJ Logo" class="token-logo">
    <h1>DOJ COIN</h1>
    <div class="price">ğŸ”„ Ù‚ÛŒÙ…Øª Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ: <span id="price">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</span></div>
    <div class="balance">ğŸ’° Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø´Ù…Ø§: <span id="balance">â€”</span></div>
    <button onclick="connectWallet()">Ø§ØªØµØ§Ù„ Ú©ÛŒÙâ€ŒÙ¾ÙˆÙ„</button>
    <br /><br />
    <button onclick="addToken()">â• Ø§ÙØ²ÙˆØ¯Ù† DOJ Ø¨Ù‡ MetaMask</button>
  </div>

  <script>
    const tokenAddress = "0x2815978CA263b0E82daEf5b2ba019Cc2FFc6097E";
    const tokenSymbol = "DOJ";
    const tokenDecimals = 18;
    const tokenImage = "https://raw.githubusercontent.com/TOKEN-TRUSTED/DOJ-TOKEN-ORIGINAL/main/logo.png";

    async function connectWallet() {
      if (window.ethereum) {
        try {
          const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
          const account = accounts[0];
          getBalance(account);
        } catch (err) {
          alert("Ø§ØªØµØ§Ù„ Ø±Ø¯ Ø´Ø¯");
        }
      } else {
        alert("MetaMask Ù†ØµØ¨ Ù†ÛŒØ³Øª!");
      }
    }

    async function getBalance(account) {
      const provider = new ethers.providers.Web3Provider(window.ethereum);
      const contract = new ethers.Contract(tokenAddress, ["function balanceOf(address owner) view returns (uint256)"], provider);
      const balance = await contract.balanceOf(account);
      document.getElementById("balance").innerText = (balance / 1e18).toFixed(4) + " DOJ";
    }

    async function addToken() {
      try {
        const wasAdded = await ethereum.request({
          method: 'wallet_watchAsset',
          params: {
            type: 'ERC20',
            options: {
              address: tokenAddress,
              symbol: tokenSymbol,
              decimals: tokenDecimals,
              image: tokenImage,
            },
          },
        });

        if (wasAdded) {
          alert('DOJ Ø¨Ù‡ Ù…ØªØ§Ù…Ø³Ú© Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯!');
        } else {
          alert('Ø§Ø¶Ø§ÙÙ‡ Ù†Ø´Ø¯ :(');
        }
      } catch (error) {
        console.error(error);
      }
    }

    async function fetchPrice() {
      try {
        const res = await fetch("https://api.dexscreener.com/latest/dex/pairs/bsc/0xBAB73702F12f0152cC3FD7781EBBdd7891Fd1a20");
        const json = await res.json();
        const price = json.pair.priceUsd;
        document.getElementById("price").innerText = `$${parseFloat(price).toFixed(4)}`;
      } catch (e) {
        document.getElementById("price").innerText = "Ù†Ø§Ù…Ø´Ø®Øµ";
      }
    }

    fetchPrice();
    setInterval(fetchPrice, 10000);
  </script>

  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</body>
</html>
